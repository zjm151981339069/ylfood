<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.spfood.oms.order.intf.domain.OrderExchangeCommodity">
	<resultMap id="BaseResultMap"
		type="com.spfood.oms.order.intf.domain.OrderExchangeCommodity">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="EXCOMID" property="exComId" jdbcType="BIGINT" />
		<result column="EXCODE" property="exCode" jdbcType="VARCHAR" />
		<result column="CODE" property="code" jdbcType="VARCHAR" />
		<result column="NAME" property="name" jdbcType="VARCHAR" />
		<result column="COUNT" property="count" jdbcType="INTEGER" />
		<result column="ISSUEDES" property="issuedes" jdbcType="VARCHAR" />
		<result column="PURL" property="purl" jdbcType="VARCHAR" />
		<collection property="pictureUrl"
			ofType="com.spfood.oms.order.intf.domain.ExchangePicture" column="expid">
			<id column="EXPID" property="exPid" jdbcType="BIGINT" />
			<result column="EXCODE1" property="exCode" jdbcType="VARCHAR" />
			<result column="CODE1" property="code" jdbcType="VARCHAR" />
			<result column="URL" property="url" jdbcType="VARCHAR" />
		</collection>
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		EXCOMID, EXCODE, CODE, NAME, COUNT, ISSUEDES,PURL 
	</sql>
	<sql id="Base_Where_Case">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<where>
			<if test="exComId != null">
				AND EXCOMID = #{exComId,jdbcType=BIGINT}
			</if>
			<if test="excode != null">
				AND EXCODE = #{exCode,jdbcType=VARCHAR}
			</if>
			<if test="code != null">
				AND CODE = #{code,jdbcType=VARCHAR}
			</if>
			<if test="name != null">
				AND NAME = #{name,jdbcType=VARCHAR}
			</if>
			<if test="count != null">
				AND COUNT = #{count,jdbcType=INTEGER}
			</if>
			<if test="issuedes != null">
				AND ISSUEDES = #{issuedes,jdbcType=VARCHAR}
			</if>
			<if test="purl != null">
				AND PURL = #{purl,jdbcType=VARCHAR}
			</if>
		</where>
	</sql>
	<!-- 插入商品表 -->
	<insert id="insert" parameterType="com.spfood.oms.order.intf.domain.OrderExchangeCommodity">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		INSERT INTO oms_exchange_commodity
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="exComId != null">
				EXCOMID,
			</if>
			<if test="exCode != null">
				EXCODE,
			</if>
			<if test="code != null">
				CODE,
			</if>
			<if test="name != null">
				NAME,
			</if>
			<if test="count != null">
				COUNT,
			</if>
			<if test="issuedes != null">
				ISSUEDES,
			</if>
			<if test="purl != null">
				PURL,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="exComId != null">
				#{exComId,jdbcType=BIGINT},
			</if>
			<if test="excode != null">
				#{exCode,jdbcType=VARCHAR},
			</if>
			<if test="code != null">
				#{code,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				#{name,jdbcType=VARCHAR},
			</if>
			<if test="count != null">
				#{count,jdbcType=INTEGER},
			</if>
			<if test="issuedes != null">
				#{issuedes,jdbcType=VARCHAR},
			</if>
			<if test="purl != null">
				#{purl,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	
	<!-- 用户查所有商品 -->
	 <select id="getOrderExchangeListByOrderExchangeNos" resultMap="BaseResultMap"  >
  	SELECT 
  	<include refid="Base_Column_List"></include>
  	FROM oms_exchange_commodity c
  	where c.exCode = #{exCode}  
  </select>
  
  <!-- 批量插入商品表 -->
	<insert id="insertInBatch" parameterType="java.util.List">
		INSERT INTO oms_exchange_commodity
		(excomid,excode,code,name,count,issuedes,purl)
		VALUES
		<foreach collection="list" item="item" index="index"
			separator=",">
			(#{item.exComId,jdbcType=BIGINT},#{item.exCode,jdbcType=VARCHAR},#{item.code,jdbcType=VARCHAR},
			#{item.name,jdbcType=VARCHAR},#{item.count,jdbcType=INTEGER},#{item.issuedes,jdbcType=VARCHAR},
			#{item.purl,jdbcType=VARCHAR})
		</foreach>
	</insert>
  <!-- 根据换货单编码查所有商品 -->
	<select id="getExchangeCommodityList" resultMap="BaseResultMap" parameterType="java.util.List">
	SELECT 
  	<include refid="Base_Column_List"/>
  	FROM oms_exchange_commodity c
  	WHERE c.exCode IN 
  	<foreach item="exCode" index="index" collection="list" open="(" separator="," close=")">  
	  	#{exCode,jdbcType=VARCHAR}  
	  </foreach> 
	</select>
</mapper>